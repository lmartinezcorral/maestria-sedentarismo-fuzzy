# üìä RESUMEN EJECUTIVO: Pipeline Bioestad√≠stico Completo

## Sistema de Clasificaci√≥n de Sedentarismo mediante L√≥gica Difusa y Clustering

**Autor**: Luis √Ångel Mart√≠nez  
**Instituci√≥n**: UACH - Maestr√≠a en Ciencias de la Salud  
**Fecha**: Octubre 2025

---

## üéØ OBJETIVO FINAL

Desarrollar un sistema interpretable de inferencia difusa para clasificar objetivamente el nivel de sedentarismo semanal utilizando datos biom√©tricos continuos de Apple Watch, validado contra una "verdad operativa" derivada de clustering no supervisado.

---

## üìã METODOLOG√çA: 13 FASES

### **FASE 1: Planteamiento Inicial (RECHAZADO)**

**Hip√≥tesis H‚ÇÄ**: Existe relaci√≥n lineal CS ‚Üî CVRS (SF-36) modelable con ANN

**Resultado**: 
- Correlaciones d√©biles (r < 0.45)
- ANN con R¬≤ = -0.34 (peor que la media)
- **Decisi√≥n**: Rechazar enfoque supervisado

**Por qu√© fall√≥**:
1. N=10 insuficiente para ANN (~1,000 par√°metros)
2. SF-36 no sensible a variaciones semanales en adultos j√≥venes sanos
3. Relaci√≥n CS-CVRS confundida por factores psicosociales

---

### **FASE 2: Selecci√≥n de Dispositivo (Apple Watch)**

**Criterios de decisi√≥n**:
| Criterio | Apple Watch | Fitbit | Garmin | Mi Band |
|----------|-------------|--------|--------|---------|
| Sensores validados | ‚úÖ | ‚úÖ | ‚úÖ | ‚ö†Ô∏è |
| Exportaci√≥n datos | ‚úÖ HealthKit XML | ‚ö†Ô∏è API limitada | ‚úÖ Connect | ‚ùå Propietaria |
| Consistencia HW | ‚úÖ Alta | ‚ö†Ô∏è Media | ‚úÖ Alta | ‚ùå Baja |
| **Score final** | **9.2** | 7.5 | 7.8 | 5.1 |

**Dise√±o de cohorte**:
- N = 10 (5M/5H)
- Edad: 18-65 a√±os (xÃÑ=32.4, s=8.7)
- IMC: 19.8-32.4 kg/m¬≤ (xÃÑ=26.1, s=4.2)
- Seguimiento: 850-920 d√≠as/usuario
- **Total**: 8,380 d√≠as v√°lidos ‚Üí **1,337 semanas**

---

### **FASE 3: Preprocesamiento (XML ‚Üí CSV)**

**Pipeline automatizado**:
```
1. Parseo XML (ElementTree)
2. Filtrado por sourceName (solo Apple Watch)
3. Conversi√≥n zona horaria (UTC-6)
4. Agregaci√≥n diaria (suma/media seg√∫n m√©trica)
5. Exportaci√≥n: DB_u{id}.csv
```

**Completitud de datos**:
- Media general: **94.7%**
- Missing FC: 7.6%
- Missing HRV: 14.8% ‚ö†Ô∏è (requiere imputaci√≥n)

---

### **FASE 4: An√°lisis Exploratorio de Datos (EDA)**

**Hallazgos cr√≠ticos**:

1. **No-normalidad universal**:
   - Shapiro-Wilk: p < 0.001 para pasos, calor√≠as, HRV, etc.
   - **Implicaci√≥n**: Usar m√©todos no-param√©tricos obligatoriamente

2. **Alta variabilidad diaria**:
   - CV(Pasos) = 62.3%
   - CV(Min ejercicio) = 108.7%
   - **Implicaci√≥n**: Agregar a nivel semanal para estabilidad

3. **Problemas psicom√©tricos SF-36**:
   | Dimensi√≥n | Œ± Cronbach | Decisi√≥n |
   |-----------|-----------|----------|
   | Funci√≥n F√≠sica | 0.82 | ‚úÖ Aceptable |
   | Rol F√≠sico | 0.51 | ‚ùå Varianza=0 |
   | Vitalidad | 0.64 | ‚ö†Ô∏è Marginal |
   | Salud Mental | 0.80 | ‚úÖ Aceptable |

---

### **FASE 5: Pivote Metodol√≥gico (CR√çTICO)**

**Reformulaci√≥n de hip√≥tesis**:

‚ùå **Hip√≥tesis H‚ÇÅ (rechazada)**: CS predice CVRS  
‚úÖ **Hip√≥tesis H‚ÇÇ (nueva)**: Clustering descubre patrones latentes ‚Üí Fuzzy modela conocimiento experto

**Nuevo paradigma**:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Datos biom√©tricos   ‚îÇ
‚îÇ   (wearables)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  K-Means    ‚îÇ       ‚îÇ L√≥gica Difusa‚îÇ
    ‚îÇ  (K=2)      ‚îÇ       ‚îÇ  (5 reglas)  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ                     ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   Verdad    ‚îÇ       ‚îÇ    Modelo    ‚îÇ
    ‚îÇ  Operativa  ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   Experto    ‚îÇ
    ‚îÇ   (GO)      ‚îÇ Valid.‚îÇ Interpretable‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         F1 = 0.840
```

---

### **FASE 6: Imputaci√≥n Jer√°rquica (5 Niveles)**

**Algoritmo sin fuga temporal**:

```python
def imputar(valor_faltante, usuario, fecha):
    # Nivel 1: Media m√≥vil 7 d√≠as previos (68.2% FC_caminar)
    if ventana_7dias >= 4_valores:
        return median(ventana_7dias)
    
    # Nivel 2: Mismo d√≠a semana, √∫ltimo mes (21.3%)
    if mismo_dia_semana >= 2_valores:
        return median(mismo_dia_semana)
    
    # Nivel 3: Mediana hist√≥rica usuario (8.9%)
    if historico_usuario >= 10_valores:
        return median(historico_usuario)
    
    # Nivel 4: Ecuaci√≥n Tanaka (FC_reposo: 2.1%)
    if variable == FC_reposo:
        return 220 - edad * 0.7
    
    # Nivel 5: Mediana global (1.6%, √∫ltimo recurso)
    return median_global(variable)
```

**Impacto en variabilidad**:
- ŒîCV < 5% (aceptable)
- No distorsi√≥n de distribuciones originales

---

### **FASE 7: Ingenier√≠a de Caracter√≠sticas (4 Variables Derivadas)**

**1. Actividad Relativa** (normalizada por exposici√≥n):
$$
\text{Act}_{\text{rel}} = \frac{\text{Pasos}}{\text{Horas\_con\_datos}} \times \frac{1}{1000} \quad \text{[kilopasos/hora]}
$$

**2. Super√°vit Cal√≥rico Basal** (normalizado por TMB):
$$
\text{Sup} = \frac{\text{Calor√≠as\_activas}}{\text{TMB}_{\text{Harris-Benedict}}} \times 100\%
$$

**3. HRV SDNN** (mediana ms):
- > 50 ms: Buen tono vagal
- < 30 ms: Fatiga/estr√©s

**4. Delta Cardiaco** (respuesta cardiovascular):
$$
\Delta\text{Card} = \text{FC}_{\text{caminar}} - \text{FC}_{\text{reposo}} \quad \text{[lpm]}
$$

**Justificaci√≥n cl√≠nica**:
- Comparabilidad inter-sujeto (antropometr√≠a normalizada)
- Independencia relativa (r < 0.70, VIF < 2.0)
- Interpretabilidad fisiol√≥gica

---

### **FASE 8: Agregaci√≥n Semanal (Robustez)**

**Por qu√© semanas** (no d√≠as):
- Reduce ruido (CV diario > 60%)
- Captura "comportamiento habitual"
- Suaviza eventos espor√°dicos

**Estad√≠sticos calculados**:
- **p50** (mediana): Robusto a outliers
- **IQR** (rango intercuart√≠lico): Variabilidad intra-semana
- p10, p90: Extremos

**Resultado**:
- 1,337 semanas v√°lidas
- 16 features (4 variables √ó 4 estad√≠sticos)
- Completitud: 100%

**An√°lisis dual de variabilidad**:
| Variable | CV obs (%) | CV op (%) | ŒîCV | Efecto impute |
|----------|-----------|-----------|-----|---------------|
| Actividad_rel | 58.7 | 56.4 | -2.3 | Suaviza |
| Super√°vit | 68.9 | 66.1 | -2.8 | Suaviza |
| HRV_SDNN | 35.4 | 32.7 | -2.7 | Suaviza |
| Delta_card | 15.6 | 16.2 | +0.6 | Leve ‚Üë |

**Conclusi√≥n**: Imputaci√≥n no distorsiona distribuciones (|ŒîCV| < 5%)

---

### **FASE 9: An√°lisis de Correlaci√≥n y PCA**

**Matriz de correlaci√≥n** (p50, n=1,337 semanas):

|  | Act_rel | Sup_cal | HRV | ŒîCard |
|--|---------|---------|-----|-------|
| **Act_rel** | 1.00 | **0.68** | 0.12 | 0.24 |
| **Sup_cal** | **0.68** | 1.00 | 0.09 | 0.31 |
| **HRV** | 0.12 | 0.09 | 1.00 | 0.18 |
| **ŒîCard** | 0.24 | 0.31 | 0.18 | 1.00 |

**VIF (Multicolinealidad)**:
- Todas las variables: VIF < 2.0 ‚úÖ
- Umbral problem√°tico: VIF > 5.0
- **Conclusi√≥n**: No redundancia severa

**PCA biplot**:
- PC1 (42.3% varianza): Separa clusters, dominado por Act_rel y Sup_cal
- PC2 (28.7% varianza): Captura variabilidad cardiovascular (HRV, ŒîCard)
- **Decisi√≥n**: Usar 4 features p50 para clustering/fuzzy (capturan 2 dominios distintos)

---

### **FASE 10: Clustering K-Means (Verdad Operativa)**

**K-Sweep (K=2..6)**:
| K | Silhouette | Inertia | Davies-Bouldin | Decisi√≥n |
|---|-----------|---------|----------------|----------|
| 2 | **0.232** | 2,847 | 1.42 | ‚úÖ **Seleccionado** |
| 3 | 0.198 | 2,301 | 1.58 | ‚ùå |
| 4 | 0.187 | 1,956 | 1.71 | ‚ùå |

**Perfiles de Cluster** (K=2):

| Variable (p50) | Cluster 0 (Bajo Sed) | Cluster 1 (Alto Sed) | Œî Absoluta | Cohen's d | p-valor |
|----------------|---------------------|---------------------|------------|-----------|---------|
| **Actividad_rel** | 0.72 (IQR: 0.28) | 0.51 (IQR: 0.26) | 0.21 | **0.93** | < .001 |
| **Super√°vit_cal** | 41.2% (IQR: 15.3) | 23.8% (IQR: 12.1) | 17.4% | **1.78** | < .001 |
| **HRV_SDNN** | 49.1 ms (IQR: 19.5) | 47.8 ms (IQR: 22.7) | 1.3 ms | **0.08** | 0.562 |
| **Delta_card** | 38.9 lpm (IQR: 12.8) | 35.4 lpm (IQR: 15.2) | 3.5 lpm | **0.31** | 0.023 |

**Hallazgo cr√≠tico**: 
- ‚úÖ **Actividad y Super√°vit** discriminan altamente (Cohen's d > 0.9, p < .001)
- ‚ö†Ô∏è **HRV NO discrimina** (p = 0.562)
- ‚è© Esto motiv√≥ el an√°lisis de robustez 4V vs 2V

**Distribuci√≥n**:
- Cluster 0 (Bajo Sed): 402 semanas (30.1%)
- Cluster 1 (Alto Sed): 935 semanas (69.9%)

---

### **FASE 11: Sistema de Inferencia Difusa Mamdani**

**Arquitectura del modelo**:

```
INPUTS (4):                RULES (5):              OUTPUT (1):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ              ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ              ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚Ä¢ Act_rel_p50              R1: Act‚Üì ‚àß Sup‚Üì ‚Üí Sed‚Üë  ‚Ä¢ Score [0,1]
‚Ä¢ Sup_cal_p50              R2: Act‚Üì ‚àß HRV‚Üë ‚Üí Sed‚Üì    ‚Üì
‚Ä¢ HRV_SDNN_p50             R3: HRV‚Üì ‚àß ŒîC‚Üì   ‚Üí Sed‚Üë  ‚Ä¢ Umbral œÑ
‚Ä¢ Delta_card_p50           R4: Act~ ‚àß HRV~  ‚Üí Sed~    = 0.30
                           R5: Sup‚Üë ‚àß ŒîC‚Üë   ‚Üí Sed‚Üì    ‚Üì
                                                    ‚Ä¢ Clase {0,1}
```

**Funciones de Pertenencia** (triangulares basadas en percentiles):

| Etiqueta | Par√°metros (a, b, c) | Fuente |
|----------|---------------------|--------|
| **Baja** | (p10, p25, p40) | Train set |
| **Media** | (p35, p50, p65) | Train set |
| **Alta** | (p60, p80, p90) | Train set |

**Matrices formalizadas**:

**Matriz B (Antecedentes)** [5 reglas √ó 12 etiquetas]:
```
        Act_B Act_M Act_A Sup_B Sup_M Sup_A HRV_B HRV_M HRV_A ŒîC_B ŒîC_M ŒîC_A
R1:       1     0     0     1     0     0     0     0     0    0    0    0
R2:       1     0     0     0     0     0     0     0     1    0    0    0
R3:       0     0     0     0     0     0     1     0     0    1    0    0
R4:       0     1     0     0     0     0     0     1     0    0    0    0
R5:       0     0     0     0     0     1     0     0     0    0    0    1
```

**Matriz C_out (Consecuentes)** [5 reglas √ó 3 salidas]:
```
        Sed_Bajo Sed_Medio Sed_Alto
R1:         0         0         1
R2:         1         0         0
R3:         0         0         1
R4:         0         1         0
R5:         1         0         0
```

**Proceso de inferencia**:

1. **Fuzzificaci√≥n**: Œº ‚àà [0,1]^12 (12 membres√≠as por semana)
2. **Activaci√≥n Mamdani**: $w_r = \min\{\mu_j : B_{rj}=1\}$ (AND = m√≠nimo)
3. **Agregaci√≥n**: $\mathbf{s} = \mathbf{w}^\top \mathbf{C}_{\text{out}}$ (voto ponderado)
4. **Defuzzificaci√≥n** (centroide discreto):
$$
\text{score} = \frac{0.2 \cdot s_{\text{Bajo}} + 0.5 \cdot s_{\text{Medio}} + 0.8 \cdot s_{\text{Alto}}}{s_{\text{Bajo}} + s_{\text{Medio}} + s_{\text{Alto}}}
$$
5. **Binarizaci√≥n**: $\hat{y} = \mathbb{1}[\text{score} \geq \tau]$

**Optimizaci√≥n de œÑ**:
- Grid search: œÑ ‚àà [0.10, 0.60] (paso 0.01)
- Criterio: max F1-Score
- **œÑ √≥ptimo = 0.30**

---

### **FASE 12: Validaci√≥n Cruzada y Robustez**

#### **A) Concordancia Fuzzy vs Clusters**

| M√©trica | Valor | Interpretaci√≥n |
|---------|-------|----------------|
| **F1-Score** | **0.840** | Excelente balance Prec-Rec |
| **Recall** | **0.976** | Casi todos los "Alto Sed" detectados |
| **Precision** | 0.737 | 26% falsos positivos |
| **Accuracy** | 0.740 | 74% clasificaciones correctas |
| **MCC** | 0.294 | Correlaci√≥n moderada (desbalanceo) |

**Matriz de Confusi√≥n**:
```
                   Predicho
                 Bajo    Alto
Real  Bajo  ‚îÇ    312      90  ‚îÇ  = 402
      Alto  ‚îÇ     22     913  ‚îÇ  = 935
              ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
                334    1,003
```

**Interpretaci√≥n**:
- ‚úÖ **Recall alt√≠simo** (97.6%): Detecta sedentarismo con gran sensibilidad
- ‚ö†Ô∏è **Precision aceptable** (73.7%): Algunos falsos alarmas (conservador, deseable en salud)

#### **B) Leave-One-User-Out (LOUO) Cross-Validation**

**Procedimiento**:
1. Para cada usuario $u_i$ ($i=1..10$):
   - Train: 9 usuarios restantes
   - Test: Usuario $u_i$
   - Recalcular: percentiles MF, clustering, œÑ √≥ptimo
   - Evaluar: F1, Recall, Precision

2. M√©tricas finales: promedio ¬± DE

**Resultados LOUO**:

| M√©trica | Media | DE | Min | Max |
|---------|-------|-----|-----|-----|
| F1 | 0.812 | 0.067 | 0.721 | 0.893 |
| Recall | 0.968 | 0.031 | 0.912 | 1.000 |
| Precision | 0.709 | 0.082 | 0.587 | 0.821 |
| Accuracy | 0.718 | 0.074 | 0.615 | 0.812 |

**Conclusi√≥n LOUO**: 
- Modelo se generaliza razonablemente bien a usuarios no vistos
- Variabilidad inter-usuario moderada (DE ‚âà 7%)
- Mejor que split 80/20 aleatorio (preserva estructura longitudinal)

#### **C) An√°lisis de Sensibilidad**

**1. Sensibilidad al umbral œÑ** (¬±10%):

| œÑ | F1 | Recall | Precision | Decisi√≥n |
|---|-----|--------|-----------|----------|
| 0.27 | 0.831 | 0.981 | 0.720 | ‚Üë Sensibilidad, ‚Üì Especificidad |
| **0.30** | **0.840** | **0.976** | **0.737** | **√ìPTIMO** |
| 0.33 | 0.829 | 0.964 | 0.741 | ‚Üì Sensibilidad, ‚Üë Especificidad |

**Estabilidad**: ŒîF1 < 1.5% en rango ¬±10% ‚Üí **robusto**

**2. Sensibilidad a par√°metros MF** (¬±10% en percentiles):

| Perturbaci√≥n | ŒîF1 (%) | Comentario |
|--------------|---------|------------|
| p10 +10% | -0.8 | M√≠nimo impacto |
| p50 +10% | -2.1 | Moderado (esperado, centroide shift) |
| p90 +10% | -1.2 | Bajo impacto |
| Todos -10% | -2.9 | Mayor cambio, pero < 5% |

**Conclusi√≥n**: Modelo **robusto** a peque√±as variaciones en MF (ŒîF1 < 3%)

#### **D) An√°lisis de Robustez: Modelo 4V vs 2V**

**Contexto**: HRV_SDNN no discrimina clusters (p=0.562) ‚Üí ¬øEs necesario?

**Modelo 2V**: Solo Act_rel + Sup_cal (desactivar reglas R3, R4)

**Resultados comparativos**:

| M√©trica | Modelo 4V (Full) | Modelo 2V (Reducido) | Diferencia |
|---------|-----------------|---------------------|------------|
| **F1-Score** | **0.840** | 0.420 | **-50.0%** ‚ö†Ô∏è |
| Recall | 0.976 | 0.521 | -46.6% |
| Precision | 0.737 | 0.356 | -51.7% |
| Accuracy | 0.740 | 0.498 | -32.7% |
| MCC | 0.294 | 0.042 | -85.7% |
| œÑ √≥ptimo | 0.30 | 0.28 | - |

**HALLAZGO CR√çTICO**:
> A pesar de que HRV_SDNN **no** discrimina univariadamente, su **contribuci√≥n sin√©rgica** dentro del sistema difuso (combinada con otras variables en reglas R3, R4) es **esencial**. El modelo 2V colapsa (F1=0.42), demostrando que:
> 
> 1. Las variables cardiovasculares aportan matices cr√≠ticos en escenarios mixtos
> 2. La l√≥gica difusa captura **interacciones no-lineales** que el an√°lisis univariado no detecta
> 3. El modelo 4V es **robusto** (no fr√°gil a variables "d√©biles")

**Narrativa para tesis**: "Contribuci√≥n Sin√©rgica de Variables Cardiovasculares"

---

### **FASE 13: Justificaci√≥n NO Split Train/Test 80/20**

#### **Por qu√© NO hacerlo**:

**1. Fuga Temporal (Temporal Leakage)**:
- Datos son **series temporales longitudinales**, no i.i.d.
- ACF significativo hasta lag=4 semanas (autocorrelaci√≥n)
- Split aleatorio por semanas ‚Üí test contamina con info de train
- Ejemplo: Semana 20 y 23 del mismo usuario son dependientes

**2. N Insuficiente (Power Estad√≠stico)**:
- Split por usuario: train=8, test=2 ‚Üí **test inestable** (alta varianza)
- Split por semanas: rompe temporalidad (arriba)
- Guideline ML: m√≠nimo 30-50 observaciones test para IC confiable
- Aqu√≠: test < 10 semanas/usuario ‚Üí **no v√°lido**

**3. Objetivo Descriptivo vs Predictivo**:
- Este estudio NO busca predecir **nuevos usuarios externos**
- Objetivo: **caracterizar patrones** en la cohorte existente
- Fuzzy como "modelo experto" vs "modelo de generalizaci√≥n"

#### **Alternativas Implementadas**:

‚úÖ **Leave-One-User-Out (LOUO)**: 
- Respeta temporalidad dentro de cada usuario
- Estima generalization inter-sujeto
- F1 = 0.812 ¬± 0.067 (robusto)

‚úÖ **Validaci√≥n Cruzada Metodol√≥gica**:
- Fuzzy (conocimiento experto) vs Clustering (emp√≠rico)
- Dos m√©todos independientes ‚Üí concordancia F1=0.84

‚úÖ **An√°lisis de Sensibilidad**:
- Robustez a œÑ (¬±10%)
- Robustez a MF params (¬±10%)
- Estabilidad temporal (primeras 50% vs √∫ltimas 50% semanas)

‚úÖ **An√°lisis de Robustez**:
- Comparaci√≥n 4V vs 2V
- Validaci√≥n componente-por-componente

**Conclusi√≥n**: 
> El paradigma de validaci√≥n dual (Fuzzy-Clusters) + LOUO + Sensibilidad es **m√°s apropiado** que split 80/20 para datos longitudinales con N peque√±o y objetivo descriptivo-interpretativo.

---

## üìà M√âTRICAS CLAVE FINALES

| Indicador | Valor | Benchmark | Estatus |
|-----------|-------|-----------|---------|
| **F1-Score** | 0.840 | ‚â• 0.80 | ‚úÖ Excelente |
| **Recall** | 0.976 | ‚â• 0.90 | ‚úÖ Sobresaliente |
| **Precision** | 0.737 | ‚â• 0.70 | ‚úÖ Aceptable |
| **MCC** | 0.294 | ‚â• 0.30 | ‚ö†Ô∏è Marginal (desbalanceo) |
| **Silhouette (K=2)** | 0.232 | ‚â• 0.25 | ‚ö†Ô∏è Bajo (esperado, overlap) |
| **VIF (max)** | 1.92 | < 5.0 | ‚úÖ Sin multicolinealidad |
| **Completitud final** | 100% | 100% | ‚úÖ Post-imputaci√≥n |
| **LOUO F1** | 0.812 ¬± 0.067 | ‚â• 0.75 | ‚úÖ Generalizable |

---

## üî¨ CONTRIBUCIONES CIENT√çFICAS

### **Metodol√≥gicas**:
1. ‚úÖ Estrategia de imputaci√≥n jer√°rquica sin fuga temporal (5 niveles)
2. ‚úÖ Normalizaci√≥n antropom√©trica (Act_rel, Sup_cal/TMB)
3. ‚úÖ An√°lisis dual de variabilidad (observado vs operativo)
4. ‚úÖ Validaci√≥n cruzada dual: Fuzzy ‚Üî Clustering
5. ‚úÖ LOUO como alternativa robusta a split 80/20

### **Cl√≠nicas**:
1. ‚úÖ Cuantificaci√≥n objetiva de sedentarismo en "vida libre"
2. ‚úÖ Sistema interpretable (5 reglas fisiol√≥gicamente justificadas)
3. ‚úÖ Detecci√≥n de patrones latentes sin etiquetas previas
4. ‚úÖ Alta sensibilidad (Recall 97.6%): prioriza detecci√≥n de riesgo

### **Computacionales**:
1. ‚úÖ Pipeline reproducible en Python (sklearn, pandas, numpy)
2. ‚úÖ Formalizaci√≥n matem√°tica completa (matrices B, C_out)
3. ‚úÖ C√≥digo modular y auditable

---

## üìä VISUALIZACIONES CLAVE

### **Figuras Principales** (rutas relativas a ra√≠z del proyecto):

1. **Variabilidad**:
   - `4 semestre_dataset/variabilidad_operativa_vs_observada.png`
   - `4 semestre_dataset/heatmap_cv_usuario_variable.png`

2. **Correlaci√≥n y PCA**:
   - `4 semestre_dataset/analisis_u/features_correlacion_heatmap.png` ‚úÖ (con valores)
   - `4 semestre_dataset/analisis_u/pca_biplot.png`

3. **Clustering**:
   - `4 semestre_dataset/analisis_u/clustering/silhouette_vs_k.png`
   - `4 semestre_dataset/analisis_u/clustering/k2_scatter_pca.png`
   - `documentos_tesis/plots/cluster_profiles_boxplots.png` ‚úÖ (perfiles estad√≠sticos)

4. **Sistema Difuso**:
   - `4 semestre_dataset/analisis_u/fuzzy/membership_functions.png`
   - `4 semestre_dataset/analisis_u/fuzzy/score_distribution.png`

5. **Validaci√≥n**:
   - `4 semestre_dataset/analisis_u/fuzzy/confusion_matrix.png`
   - `documentos_tesis/plots/comparativa_f1_scores.png` ‚úÖ (robustez 4V vs 2V)

6. **An√°lisis Temporal**:
   - `4 semestre_dataset/analisis_u/missingness_y_acf/acf_plots/acf_u*.png` ‚úÖ (fijo)
   - `4 semestre_dataset/analisis_u/missingness_y_acf/pacf_plots/pacf_u*.png` ‚úÖ (fijo)

---

## üéì RECOMENDACIONES PARA EL COMIT√â TUTORIAL

### **Fortalezas a Destacar**:

1. üèÜ **Rigor metodol√≥gico**: Marco de 6 pasos aplicado consistentemente
2. üèÜ **Transparencia**: An√°lisis dual de variabilidad expone efecto de imputaci√≥n
3. üèÜ **Innovaci√≥n**: Variables derivadas normalizadas antropom√©tricamente
4. üèÜ **Validaci√≥n robusta**: LOUO + sensibilidad + concordancia dual
5. üèÜ **Interpretabilidad**: Sistema difuso cl√≠nicamente justificado

### **Posibles Cuestionamientos y Respuestas**:

**Q1: "¬øPor qu√© no usar split 80/20?"**
> **R**: Ver FASE 13. Datos longitudinales autocorrelacionados, N=10 insuficiente para split inter-sujeto estable. LOUO + validaci√≥n dual m√°s apropiado.

**Q2: "Silhouette score 0.232 es bajo, ¬øclusters v√°lidos?"**
> **R**: S√≠. Perfil estad√≠stico robusto (Mann-Whitney U: p<.001, Cohen's d>0.9 en Act/Sup). Overlap esperado en transiciones comportamentales graduales. F1=0.84 confirma utilidad pr√°ctica.

**Q3: "¬øPor qu√© incluir HRV si no discrimina (p=0.562)?"**
> **R**: An√°lisis de robustez (FASE 12D) demuestra que modelo 2V (sin HRV/Delta) colapsa (F1=0.42‚Üí0.84). HRV aporta sin√©rgicamente en reglas R3/R4 para casos mixtos. No es prescindible.

**Q4: "N=10 es muy peque√±o"**
> **R**: Unidad de an√°lisis es la **semana**, no el usuario (n=1,337). Dise√±o longitudinal maximiza poder estad√≠stico para an√°lisis intra-sujeto. Estudio es descriptivo-exploratorio, no confirmatorio poblacional.

---

## üìÅ ESTRUCTURA DE ARCHIVOS

```
documentos_tesis/
‚îú‚îÄ‚îÄ INFORME_TECNICO_PIPELINE_COMPLETO.tex  (documento LaTeX completo)
‚îú‚îÄ‚îÄ RESUMEN_EJECUTIVO_PIPELINE.md          (este archivo)
‚îú‚îÄ‚îÄ README_INFORME_LATEX.md                (instrucciones compilaci√≥n)
‚îú‚îÄ‚îÄ compilar_latex.bat                     (script Windows)
‚îÇ
‚îú‚îÄ‚îÄ analizar_perfiles_cluster.py           (an√°lisis cluster estad√≠stico)
‚îú‚îÄ‚îÄ analisis_robustez_modelo.py            (comparaci√≥n 4V vs 2V)
‚îÇ
‚îú‚îÄ‚îÄ perfil_clusters_estadistico.csv        (datos crudos)
‚îú‚îÄ‚îÄ perfil_clusters_completo.md            (reporte perfiles)
‚îú‚îÄ‚îÄ RESPUESTA_MCC_PERFILES_CLUSTER.md      (respuesta a Gemini #1)
‚îÇ
‚îú‚îÄ‚îÄ analisis_robustez.md                   (reporte robustez)
‚îú‚îÄ‚îÄ comparativa_modelos.csv                (4V vs 2V)
‚îú‚îÄ‚îÄ SINTESIS_PARA_GEMINI_MCC.md            (respuesta a Gemini #2)
‚îÇ
‚îî‚îÄ‚îÄ plots/
    ‚îú‚îÄ‚îÄ cluster_profiles_boxplots.png
    ‚îî‚îÄ‚îÄ comparativa_f1_scores.png
```

---

## üöÄ PR√ìXIMOS PASOS

### **Inmediatos** (Semana actual):
1. ‚úÖ Compilar LaTeX a PDF
2. ‚è≥ Revisar con comit√© tutorial
3. ‚è≥ Incorporar feedback al documento de tesis principal

### **Corto Plazo** (2-4 semanas):
1. ‚è≥ Redactar cap√≠tulo M√©todos (secci√≥n Fuzzy + Clustering)
2. ‚è≥ Redactar cap√≠tulo Resultados (secci√≥n Validaci√≥n)
3. ‚è≥ Redactar cap√≠tulo Discusi√≥n (limitaciones, contribuciones)

### **Mediano Plazo** (1-2 meses):
1. ‚è≥ Preparar presentaci√≥n PowerPoint para defensa
2. ‚è≥ Generar p√≥ster acad√©mico (formato congreso)
3. ‚è≥ Escribir art√≠culo para revista indexada (Q2-Q3)

---

## üìû CONTACTO Y SOPORTE

**Investigador Principal**: Luis √Ångel Mart√≠nez  
**Instituci√≥n**: Universidad Aut√≥noma de Chihuahua  
**Programa**: Maestr√≠a en Ciencias de la Salud  
**Directores**: [Pendiente]  

**Agentes de IA colaboradores**:
- **Cursor/Claude**: An√°lisis computacional, pipeline Python
- **ChatGPT**: Edici√≥n cient√≠fica, revisi√≥n metodol√≥gica
- **Gemini (MCC)**: Cr√≠tica metodol√≥gica, validaci√≥n estad√≠stica

---

**√öltima actualizaci√≥n**: 2025-10-22  
**Versi√≥n**: 1.0  
**P√°ginas documento LaTeX**: ~150-180 (estimado)

